-- System Vitals Overlay - Always Visible CPU/GPU Monitor
-- Optimized for Mac Pro with Dual AMD GPUs

conky.config = {
    -- Window settings
    alignment = 'top_right',
    gap_x = 20,
    gap_y = 60,
    minimum_width = 420,
    minimum_height = 700,
    maximum_width = 420,
    
    -- Appearance
    own_window = true,
    own_window_type = 'normal',
    own_window_transparent = true,
    own_window_argb_visual = true,
    own_window_argb_value = 220,
    own_window_class = 'Conky',
    own_window_title = 'System Vitals',
    
    -- Colors
    default_color = 'FFFFFF',
    color0 = '00FF00', -- Green for good
    color1 = 'FFFF00', -- Yellow for warning  
    color2 = 'FF0000', -- Red for critical
    color3 = '00FFFF', -- Cyan for info
    color4 = 'FF00FF', -- Magenta for GPU
    
    -- Font (scaled for visibility)
    use_xft = true,
    font = 'Cantarell:size=16:bold',
    
    -- Update interval
    update_interval = 1.0,
    
    -- Double buffer
    double_buffer = true,
    
    -- No borders
    draw_borders = false,
    draw_shades = false,
    draw_outline = false,
    
    -- Text settings
    use_spacer = 'none',
    text_buffer_size = 4096,
    
    -- Temperature
    temperature_unit = 'celsius',
};

conky.text = [[
${color3}â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
${color3}  ğŸ’» SYSTEM VITALS - ALWAYS VISIBLE ğŸ’»
${color3}â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

${color0}â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
${color0}ğŸ–¥ï¸  CPU - ${cpu cpu}% ${color1}${cpubar 10,100}
${color0}â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
${color3}CPU 1-4:  ${cpu cpu1}% ${cpu cpu2}% ${cpu cpu3}% ${cpu cpu4}%
${color3}CPU 5-8:  ${cpu cpu5}% ${cpu cpu6}% ${cpu cpu7}% ${cpu cpu8}%
${color3}CPU 9-12: ${cpu cpu9}% ${cpu cpu10}% ${cpu cpu11}% ${cpu cpu12}%
${color3}CPU 13-16: ${cpu cpu13}% ${cpu cpu14}% ${cpu cpu15}% ${cpu cpu16}%
${color3}Load: ${loadavg}

${color0}â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
${color0}ğŸ® GPU 1 - Navi 10 (W5700X)
${color0}â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
${color4}Usage: ${exec timeout 1 radeontop -d /dev/dri/card0 -l 1 -c 2>/dev/null | tail -1 | awk '{print $2}' || echo "N/A"}%
${color4}Temp: ${exec sensors 2>/dev/null | grep -A 10 "amdgpu-pci-0900" | grep "temp1" | head -1 | awk '{print $2}' || cat /sys/class/drm/card0/device/hwmon/hwmon*/temp1_input 2>/dev/null | awk '{printf "%.1fÂ°C", $1/1000}' || echo "N/A"}
${color4}VRAM: ${exec cat /sys/class/drm/card0/device/mem_info_vram_used 2>/dev/null | awk '{printf "%.1f", $1/1024/1024/1024}' || echo "0"}GB / ${exec cat /sys/class/drm/card0/device/mem_info_vram_total 2>/dev/null | awk '{printf "%.1f", $1/1024/1024/1024}' || echo "0"}GB
${color4}Clock: ${exec cat /sys/class/drm/card0/device/pp_dpm_sclk 2>/dev/null | grep "*" | awk '{print $2}' || echo "N/A"} MHz
${color4}Mem Clock: ${exec cat /sys/class/drm/card0/device/pp_dpm_mclk 2>/dev/null | grep "*" | awk '{print $2}' || echo "N/A"} MHz

${color0}â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
${color0}ğŸ® GPU 2 - Navi 21 (RX 6800/6900)
${color0}â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
${color4}Usage: ${exec timeout 1 radeontop -d /dev/dri/card1 -l 1 -c 2>/dev/null | tail -1 | awk '{print $2}' || echo "N/A"}%
${color4}Temp: ${exec sensors 2>/dev/null | grep -A 10 "amdgpu-pci-1400" | grep "temp1" | head -1 | awk '{print $2}' || cat /sys/class/drm/card1/device/hwmon/hwmon*/temp1_input 2>/dev/null | awk '{printf "%.1fÂ°C", $1/1000}' || echo "N/A"}
${color4}VRAM: ${exec cat /sys/class/drm/card1/device/mem_info_vram_used 2>/dev/null | awk '{printf "%.1f", $1/1024/1024/1024}' || echo "0"}GB / ${exec cat /sys/class/drm/card1/device/mem_info_vram_total 2>/dev/null | awk '{printf "%.1f", $1/1024/1024/1024}' || echo "0"}GB
${color4}Clock: ${exec cat /sys/class/drm/card1/device/pp_dpm_sclk 2>/dev/null | grep "*" | awk '{print $2}' || echo "N/A"} MHz
${color4}Mem Clock: ${exec cat /sys/class/drm/card1/device/pp_dpm_mclk 2>/dev/null | grep "*" | awk '{print $2}' || echo "N/A"} MHz

${color0}â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
${color0}ğŸ’¾ MEMORY
${color0}â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
${color3}RAM: ${mem} / ${memmax} ${color1}${membar 10,100}
${color3}Used: ${memperc}% ${color3}Free: ${memfree}
${color3}Swap: ${swap} / ${swapmax} ${swapbar 10,50}

${color0}â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
${color0}ğŸ’¿ DISK I/O
${color0}â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
${color3}Root: ${fs_used /} / ${fs_size /} ${color1}${fs_bar 10,50 /}
${color3}Read: ${diskio_read} ${color3}Write: ${diskio_write}
${color3}IOPS: ${exec iostat -x 1 2 2>/dev/null | tail -1 | awk '{print $4}' || echo "N/A"}

${color0}â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
${color0}ğŸŒ NETWORK
${color0}â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
${color3}Down: ${downspeed enp61s0} ${color3}Up: ${upspeed enp61s0}
${color3}Total: ${totaldown enp61s0} â†“ ${totalup enp61s0} â†‘

${color0}â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
${color0}ğŸŒ¡ï¸  TEMPERATURES
${color0}â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
${exec sensors 2>/dev/null | grep -E "Core|Package|Tdie|temp1" | head -6 | sed 's/^/  /' || echo "  Sensors not configured"}

${color0}â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
${color0}â±ï¸  SYSTEM INFO
${color0}â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
${color3}Uptime: ${uptime_short}
${color3}Processes: ${processes} ${color3}Running: ${running_processes}
${color3}Time: ${time %H:%M:%S} ${color3}Date: ${time %m/%d}

${color3}â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
${color3}Updated: ${time %H:%M:%S} | ${color0}CPU: ${cpu cpu}% ${color4}GPU1: ${exec timeout 1 radeontop -d /dev/dri/card0 -l 1 -c 2>/dev/null | tail -1 | awk '{print $2}' || echo "N/A"}% ${color4}GPU2: ${exec timeout 1 radeontop -d /dev/dri/card1 -l 1 -c 2>/dev/null | tail -1 | awk '{print $2}' || echo "N/A"}%
${color3}â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
]];
