# ROXY Legacy Value Map

**Generated:** 2026-01-10 22:00 MST
**Purpose:** Document status of legacy modules for consolidation

---

## Module Status

### INTEGRATED (Active, in-use)

| Module | Status | Where Used | Notes |
|--------|--------|------------|-------|
| `pool_identity.py` | INTEGRATED | `benchmark_service.py:36`, `roxy_core.py:63` | Canonical pool definitions (w5700x/6900xt). Active. |
| `llm_router.py` | INTEGRATED | `roxy_commands.py:471,666` | Simple code/general routing for command mode. Active. |
| `context_manager.py` | INTEGRATED | `roxy_core.py:3256,3479` | Conversation history compression. Active. |
| `prompts/templates.py` | INTEGRATED | `roxy_commands.py:644` | RAG/Code prompt templates. Active. |

### PARTIALLY INTEGRATED

| Module | Status | Where Used | Notes |
|--------|--------|------------|-------|
| `expert_router.py` | PARTIALLY INTEGRATED | `infrastructure.py:64,176`, `tests/test_unleashed_sprint.py` | Full MoE router exists. `router_integration.py` created as simplified wrapper for `roxy_core.py`. The full expert_router.py has more features (async, httpx, performance tracking) that could be migrated later. |

### DEPRECATED (Safe to ignore)

| Module | Status | Reason |
|--------|--------|--------|
| `roxy_assistant_v2.py` | DEPRECATED | Standalone voice assistant. Identity now consolidated into `ROXY_IDENTITY.md`. Voice functionality remains but system prompt should use identity doc. |
| `roxy_assistant.py` | DEPRECATED | Older version superseded by v2. |
| `voice/roxy-assistant.py` | DEPRECATED | Duplicate in voice folder. |

### SEPARATE SUBSYSTEM (Not core brain)

| Module | Status | Notes |
|--------|--------|-------|
| `apps/roxy-command-center/daemon_client.py` | ACTIVE | CC UI client for roxy-core daemon. Not part of brain consolidation. |
| `archive/services.LEGACY.*/context_manager.py` | ARCHIVED | Old version in archive. Ignore. |

---

## Integration Notes

### expert_router.py vs router_integration.py

The full `expert_router.py` contains:
- Async routing with httpx
- Multiple QueryTypes (CODE, MATH, CREATIVE, TECHNICAL, REASONING, BROADCAST, GENERAL, SECRETARY, TRIAGE, SCHEDULING, SUMMARY)
- ModelSpec with confidence, size_gb, specialty
- Performance tracking per model
- Full RouteDecision trace

The new `router_integration.py` is a simplified synchronous wrapper that:
- Supports subset of QueryTypes (CODE, TECHNICAL, CREATIVE, SUMMARY, GENERAL)
- Keyword-based classification
- Returns RoutingDecision for SSE routing_meta

**Future:** Consider migrating `router_integration.py` to use `expert_router.py` internals for richer routing.

### pool_identity.py Canonical Values

```python
CANONICAL_POOLS = {
    "w5700x": {"port": 11434, "gpu": "W5700X"},  # BIG pool
    "6900xt": {"port": 11435, "gpu": "6900XT"},  # FAST pool
}
```

**Note:** `router_integration.py` uses "big"/"fast" aliases which map to these canonical pools. Should eventually use canonical names directly.

### context_manager.py

Currently used in roxy_core.py at lines 3256 and 3479 for conversation history. This is active and valuable for multi-turn conversations.

---

## Action Items

1. **DONE:** `router_integration.py` created as minimal wrapper
2. **TODO:** Wire endpoint (not just model) through to streaming
3. **CONSIDER:** Migrate `router_integration.py` to use `expert_router.py` internals
4. **CONSIDER:** Update `router_integration.py` to use canonical pool names from `pool_identity.py`

---

*Generated by ROXY Reliability Sweep - PASS 1*
